# 侧边菜单功能说明

## 概述
为SugarAssistant应用添加了一个类似Android DrawerLayout的侧边菜单，提供了更好的导航体验。

## 功能特性

### 1. 侧边菜单组件 (SideMenu.tsx)
- 位于屏幕左侧，宽度为屏幕宽度的80%
- 包含应用图标和名称
- 提供所有主要功能的快速访问入口
- 支持平滑的动画过渡效果

### 2. 菜单项
- **版本信息**: 查看应用版本和更新信息
- **聊天记录**: 管理聊天会话历史
- **OCR记录**: 查看OCR识别历史记录
- **食物数据库**: 查询食物营养信息
- **糖尿病教育**: 学习糖尿病相关知识
- **血糖记录**: 记录和管理血糖数据

### 3. 交互方式
- 点击左上角的菜单按钮(☰)打开侧边菜单
- 点击菜单项直接导航到对应页面
- 点击背景遮罩或关闭按钮关闭菜单
- 支持手势滑动关闭（待实现）

## 技术实现

### 依赖库
- `react-native-gesture-handler`: 手势处理
- `react-native-reanimated`: 动画效果
- `@expo/vector-icons`: 图标支持

### 核心组件
```tsx
<SideMenu
  isVisible={isSideMenuVisible}
  onClose={closeSideMenu}
  translateX={sideMenuTranslateX}
/>
```

### 动画配置
- 打开动画: 300ms，从左侧滑入
- 关闭动画: 300ms，向左侧滑出
- 使用原生驱动提升性能

## 已集成的页面

### 1. 聊天页面 (chat.tsx)
- 在顶部状态栏左侧添加菜单按钮
- 保持原有的功能按钮布局

### 2. 聊天记录页面 (sessions.tsx)
- 在顶部标题栏右侧添加菜单按钮
- 与清除全部按钮并排显示

### 3. OCR数据页面 (ocr-data.tsx)
- 在顶部导航栏右侧添加菜单按钮
- 替换原有的占位符元素

### 4. 版本信息页面 (version.tsx)
- 在顶部导航栏右侧添加菜单按钮
- 替换原有的占位符元素

## 样式设计

### 菜单外观
- 白色背景，圆角设计
- 阴影效果增强层次感
- 图标使用蓝色主题色 (#007AFF)
- 文字使用深色系，确保可读性

### 响应式设计
- 菜单宽度自适应屏幕尺寸
- 支持不同设备的安全区域
- 适配iOS和Android平台差异

## 使用方法

### 开发者
1. 在需要侧边菜单的页面导入SideMenu组件
2. 添加状态管理：`isSideMenuVisible` 和 `sideMenuTranslateX`
3. 实现 `openSideMenu` 和 `closeSideMenu` 函数
4. 在JSX中添加菜单按钮和SideMenu组件
5. 用 `GestureHandlerRootView` 包装整个页面

### 用户
1. 点击左上角的菜单按钮(☰)
2. 在侧边菜单中选择需要的功能
3. 点击菜单项直接跳转
4. 点击背景或关闭按钮关闭菜单

## 未来改进

### 手势支持
- 添加从左边缘向右滑动打开菜单
- 支持拖拽关闭菜单
- 添加弹性动画效果

### 个性化
- 支持自定义菜单项
- 添加最近使用功能
- 支持菜单项排序

### 性能优化
- 实现菜单项的懒加载
- 优化动画性能
- 添加菜单状态持久化

## 注意事项

1. 确保所有页面都正确导入了必要的依赖
2. 菜单状态需要在页面卸载时正确清理
3. 动画使用原生驱动以获得最佳性能
4. 注意不同平台的兼容性差异
